<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="//www.bahn.de/favicon.ico" rel="icon" type="image/x-icon" />
    <link href="//www.bahn.de/common/view/static/v8/img/db_em_rgb_100px.svg" rel="apple-touch-icon" type="image/svg" />
    <meta name="author" content="github.com/hacker-bastl" />

    <title> (User) Data exposed when using #WIFIonICE </title>

    <meta name="referrer" content="no-referrer" />
    <script type="text/javascript">

    window.addEventListener('load', function() {
      var request = new XMLHttpRequest();

      request.addEventListener('load', function() {
        console.log(JSON.parse(request.responseText));
      });

      request.addEventListener('load', function() {
        document.querySelector('pre').textContent = request.responseText != '{}' ?
          JSON.stringify(JSON.parse(request.responseText), null, 4) : 'not connected to "WIFIonICE"?';
      });

      request.addEventListener('timeout', function() {
        document.querySelector('pre').textContent = request.statusText || 'connection timeout';
      });

      request.addEventListener('error', function() {
        document.querySelector('pre').textContent = request.statusText || 'connection error';
      });

      request.open('GET', '//skidbladnir.maxdome-onboard.de/api/v1/info/trainenvironmentdata');
      request.timeout = 1E4;
      request.send(null);
    });

    </script>
  </head>
  <body>
    <pre>loading...</pre>
  </body>
</html>
