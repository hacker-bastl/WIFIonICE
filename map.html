<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="//www.bahn.de/favicon.ico" rel="icon" type="image/x-icon" />
    <link href="//www.bahn.de/common/view/static/v8/img/db_em_rgb_100px.svg" rel="apple-touch-icon" type="image/svg" />

    <title> Testing DB ICE Portal APIs ... </title>

    <!-- https://hannover.ccc.de/~nexus/dbwifi/chapter2.html -->
    <meta name="referrer" content="no-referrer" />
    <script type="text/javascript">

    const loadICElocation = function() {
      var request = new XMLHttpRequest();
      request.addEventListener( 'load', function() {
        document.querySelector( 'iframe' ).setAttribute( 'src', '//www.openlinkmap.org/small.php' +
          '?lat=' + request.responseXML.querySelector( 'latitude' ).textContent +
          '&lon=' + request.responseXML.querySelector( 'longitude' ).textContent  +
          '&zoom=' + 10 ); } );
      request.open( 'GET', 'https://www.ombord.info/api/xml/position' );
      request.send( null ); };

    window.addEventListener( 'load', loadICElocation );
    setInterval( loadICElocation, 1E4 );

    </script>
  </head>
  <body>
    <iframe frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
      style="width: 100%; min-height: 800px;" >
    </iframe>
  </body>
</html>
